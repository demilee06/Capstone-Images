define(['jquery'],function($){"use strict";$.widget('Vaimo.googleApiKey',{options:{googleAPIkey:'',geocodeUrl:''},_create:function(){this._bind();},_bind:function(){var self=this,form=$('#search_mini_form_store'),searchField=$("#store_search");$(document).ready(function(){function getAreaName(latitude,longitude){var geocodingApiUrl=self.options.geocodeUrl+"?latlng="
+latitude+","+longitude;$.ajax({url:geocodingApiUrl,type:"POST",success:function(data){if(data===undefined){console.error("No results found in the geocoding response (1).");return;}else if(data.error!==''){console.error(data.error);return;}
data=data.response;if(data.results&&data.results.length>0){var areaName=data.results[0].formatted_address;searchField.css("color","transparent");searchField.val(areaName);form.submit();}else{console.error("No results found in the geocoding response (2).");}},error:function(error){console.log(error);}});}
$('#get-location-btn').on('click',function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var latitude=position.coords.latitude,longitude=position.coords.longitude;getAreaName(latitude,longitude);},function(error){console.error('Error getting location:',error.message);});}else{console.error('Geolocation is not supported by this browser.');}});});}});return $.Vaimo.googleApiKey;});
document.addEventListener("DOMContentLoaded",function(){if(isVodapayEnabled()&&isVodapayEnvironment()){document.body.classList.add("vodapay-env");const socialDownloadFooterLinks=document.getElementsByClassName('social-container');if(socialDownloadFooterLinks.length>0){socialDownloadFooterLinks[0].parentNode.style.display="none";}}});window.onload=function(){if(!isVodapayEnabled()){window.vp.running=false;return;}
const newState=isVodapayEnvironment();registerRequest(newState);window.vp.running=newState;};const isVodapayEnvironment=function(){return typeof my!=='undefined';};const isVodapayEnabled=function(){return window.vp?window.vp.enabled??false:false;};const registerRequest=async(newState)=>{newState=newState?1:0;const xhr=new XMLHttpRequest();const url=window.vp.stateUrl??'';if(!url){return;}
const params=JSON.stringify({"state":newState});return new Promise(resolve=>{xhr.open("POST",url,true);xhr.onload=()=>resolve({status:xhr.status,response:xhr.responseText});xhr.onerror=()=>resolve({status:xhr.status,response:xhr.responseText});const currentState=checkRegisterState();if(currentState!==newState){xhr.setRequestHeader('Content-Type','application/json');xhr.send(params)}});};const checkRegisterState=function(){const xhr=new XMLHttpRequest();const url=window.vp.stateUrl??'';if(!url){return 0;}
xhr.open("GET",url,false);xhr.send();if(xhr.status===200){return parseInt(xhr.responseText,10)}else{return 0;}};